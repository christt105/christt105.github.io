<header class="article-header">
    {{- $image := partialCached "helper/image" (dict "Image" .Params.image "Resources" .Resources) .RelPermalink
    "article" -}}
    {{ if and $image (default true .Page.Params.showImage) }}
    <div class="article-image">
        <a href="{{ .RelPermalink }}">
            {{ if $image.Resource }}
            {{- $Permalink := $image.Resource.RelPermalink -}}
            {{- $Width := $image.Resource.Width -}}
            {{- $Height := $image.Resource.Height -}}
            {{- $Srcset := "" -}}

            {{- if (default true .Page.Site.Params.imageProcessing.cover.enabled) -}}
            {{- $thumbnail := $image.Resource.Resize "800x" -}}
            {{- $thumbnailRetina := $image.Resource.Resize "1600x" -}}
            {{- $Srcset = printf "%s 800w, %s 1600w" $thumbnail.RelPermalink $thumbnailRetina.RelPermalink -}}
            {{- $Permalink = $thumbnail.RelPermalink -}}
            {{- $Width = $thumbnail.Width -}}
            {{- $Height = $thumbnail.Height -}}
            {{- end -}}

            <img src="{{ $Permalink }}" {{ with $Srcset }}srcset="{{ . }}" {{ end }} width="{{ $Width }}"
                height="{{ $Height }}" loading="lazy" alt="Featured image of post {{ .Title }}" />
            {{ else }}
            <img src="{{ $image.Permalink }}" loading="lazy" alt="Featured image of post {{ .Title }}" />
            {{ end }}
        </a>
    </div>
    {{ end }}

    {{ partialCached "article/components/details" . .RelPermalink }}
</header>